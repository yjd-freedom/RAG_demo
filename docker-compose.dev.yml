# docker-compose.dev.yml
services:
  web:
    build: .                 # ← 关键：使用 Dockerfile 构建基础环境
    working_dir: /app
    volumes:
      - ./:/app              # 挂载代码（热重载）
      - ./data:/app/data     # 持久化数据
    ports:
      - "8000:8000"
    command: uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
    environment:
      - TZ=Asia/Shanghai
    extra_hosts:
      - "host.docker.internal:host-gateway"